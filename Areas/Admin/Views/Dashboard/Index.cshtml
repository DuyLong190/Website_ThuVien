@{
    ViewData["Title"] = "Dashboard";
    var borrowByMonth = ViewBag.BorrowByMonth as IEnumerable<dynamic>;
}
<h2>üìä Th·ªëng k√™ t·ªïng quan th∆∞ vi·ªán</h2>
<div class="row">
    <div class="col-md-4">
        <div class="card text-white bg-primary mb-3">
            <div class="card-body">
                <h5 class="card-title">üî¢ T·ªïng s·ªë s√°ch</h5>
                <p class="card-text display-4">@ViewBag.TotalBooks</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-body">
                <h5 class="card-title">üî¢ T·ªïng s·ªë th·ªÉ lo·∫°i</h5>
                <p class="card-text display-4">@ViewBag.TotalCategories</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-info mb-3">
            <div class="card-body">
                <h5 class="card-title">üë• T·ªïng s·ªë ng∆∞·ªùi d√πng</h5>
                <p class="card-text display-4">@ViewBag.TotalUsers</p>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-4">
        <div class="card text-white bg-warning mb-3">
            <div class="card-body">
                <h5 class="card-title">üìò T·ªïng s·ªë phi·∫øu m∆∞·ª£n</h5>
                <p class="card-text display-4">@ViewBag.TotalBorrows</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-body">
                <h5 class="card-title">‚úÖ S·ªë phi·∫øu ƒë√£ tr·∫£</h5>
                <p class="card-text display-4">@ViewBag.ReturnedBorrows</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-danger mb-3">
            <div class="card-body">
                <h5 class="card-title">‚ùó Phi·∫øu ch∆∞a tr·∫£</h5>
                <p class="card-text display-4">@ViewBag.NotReturnedBorrows</p>
            </div>
        </div>
    </div>
</div>
<hr />
<h3>üìà Bi·ªÉu ƒë·ªì: S·ªë phi·∫øu m∆∞·ª£n theo th√°ng</h3>
<canvas id="borrowChart" width="800" height="400"></canvas>
@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        var ctx = document.getElementById('borrowChart').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [
                    @foreach (var item in borrowByMonth) {
                        <text>"@item.Month/@item.Year",</text>
                    }
                ],
                datasets: [{
                    label: 'S·ªë phi·∫øu m∆∞·ª£n',
                    data: [
                        @foreach (var item in borrowByMonth) {
                            <text>@item.Count,</text>
                        }
                    ],
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        stepSize: 1
                    }
                }
            }
        });
    </script>
} 